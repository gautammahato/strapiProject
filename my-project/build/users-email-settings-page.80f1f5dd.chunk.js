"use strict";(self.webpackChunkmy_project=self.webpackChunkmy_project||[]).push([[8418],{95972:(U,y,t)=>{t.r(y),t.d(y,{default:()=>ie});var e=t(67294),r=t(14087),M=t(185),T=t(53979),j=t(49066),a=t(88376),m=t(86896),v=t(88767),g=t(99771),n=t(89031),b=t(42866),O=t(24969),l=t(59946),o=t(11276),s=t(67819),d=t(61467),c=t(36856),f=t(29728),Z=t(63321),I=t(36773),A=t(14916),S=t(45697),u=t.n(S),P=t(87561);const Y=P.Ry().shape({options:P.Ry().shape({from:P.Ry().shape({name:P.Z_().required(a.I0.required),email:P.Z_().email(a.I0.email).required(a.I0.required)}).required(),response_email:P.Z_().email(a.I0.email),object:P.Z_().required(a.I0.required),message:P.Z_().required(a.I0.required)}).required(a.I0.required)}),W=({template:i,onToggle:p,onSubmit:E})=>{const{formatMessage:h}=(0,m.Z)();return e.createElement(b.P,{onClose:p,labelledBy:`${h({id:(0,n.OB)("PopUpForm.header.edit.email-templates"),defaultMessage:"Edit email template"})}, ${h({id:(0,n.OB)(i.display),defaultMessage:i.display})}`},e.createElement(O.x,null,e.createElement(Z.O,{label:`${h({id:(0,n.OB)("PopUpForm.header.edit.email-templates"),defaultMessage:"Edit email template"})}, ${h({id:(0,n.OB)(i.display),defaultMessage:i.display})}`},e.createElement(I.$,null,h({id:(0,n.OB)("PopUpForm.header.edit.email-templates"),defaultMessage:"Edit email template"})),e.createElement(I.$,{isCurrent:!0},h({id:(0,n.OB)(i.display),defaultMessage:i.display})))),e.createElement(A.J9,{onSubmit:E,initialValues:i,validateOnChange:!1,validationSchema:Y,enableReinitialize:!0},({errors:B,values:R,handleChange:C,isSubmitting:$})=>e.createElement(a.l0,null,e.createElement(l.f,null,e.createElement(o.r,{gap:5},e.createElement(s.P,{col:6,s:12},e.createElement(a.jm,{intlLabel:{id:(0,n.OB)("PopUpForm.Email.options.from.name.label"),defaultMessage:"Shipper name"},name:"options.from.name",onChange:C,value:R.options.from.name,error:B?.options?.from?.name,type:"text"})),e.createElement(s.P,{col:6,s:12},e.createElement(a.jm,{intlLabel:{id:(0,n.OB)("PopUpForm.Email.options.from.email.label"),defaultMessage:"Shipper email"},name:"options.from.email",onChange:C,value:R.options.from.email,error:B?.options?.from?.email,type:"text"})),e.createElement(s.P,{col:6,s:12},e.createElement(a.jm,{intlLabel:{id:(0,n.OB)("PopUpForm.Email.options.response_email.label"),defaultMessage:"Response email"},name:"options.response_email",onChange:C,value:R.options.response_email,error:B?.options?.response_email,type:"text"})),e.createElement(s.P,{col:6,s:12},e.createElement(a.jm,{intlLabel:{id:(0,n.OB)("PopUpForm.Email.options.object.label"),defaultMessage:"Subject"},name:"options.object",onChange:C,value:R.options.object,error:B?.options?.object,type:"text"})),e.createElement(s.P,{col:12,s:12},e.createElement(d.g,{label:h({id:(0,n.OB)("PopUpForm.Email.options.message.label"),defaultMessage:"Message"}),id:"options.message",onChange:C,value:R.options.message,error:B?.options?.message&&h({id:B.options.message,defaultMessage:B.options.message})})))),e.createElement(c.m,{startActions:e.createElement(f.z,{onClick:p,variant:"tertiary"},"Cancel"),endActions:e.createElement(f.z,{loading:$,type:"submit"},"Finish")}))))};W.propTypes={template:u().shape({display:u().string,icon:u().string,options:u().shape({from:u().shape({name:u().string,email:u().string}),message:u().string,object:u().string,response_email:u().string})}).isRequired,onSubmit:u().func.isRequired,onToggle:u().func.isRequired};const w=W;var k=t(38939),q=t(8060),F=t(79031),x=t(37909),N=t(63237),D=t(75515),_=t(15234),z=t(52624),G=t(12028),ee=t(30815),K=t(4585),te=t(85018);const J=({canUpdate:i,onEditClick:p})=>{const{formatMessage:E}=(0,m.Z)();return e.createElement(k.i,{colCount:3,rowCount:3},e.createElement(q.h,null,e.createElement(F.Tr,null,e.createElement(x.Th,{width:"1%"},e.createElement(N.T,null,E({id:(0,n.OB)("Email.template.table.icon.label"),defaultMessage:"icon"}))),e.createElement(x.Th,null,e.createElement(D.Z,{variant:"sigma",textColor:"neutral600"},E({id:(0,n.OB)("Email.template.table.name.label"),defaultMessage:"name"}))),e.createElement(x.Th,{width:"1%"},e.createElement(N.T,null,E({id:(0,n.OB)("Email.template.table.action.label"),defaultMessage:"action"}))))),e.createElement(_.p,null,e.createElement(F.Tr,{...(0,a.X7)({fn:()=>p("reset_password")})},e.createElement(x.Td,null,e.createElement(z.J,null,e.createElement(ee.Z,{"aria-label":E({id:"global.reset-password",defaultMessage:"Reset password"})}))),e.createElement(x.Td,null,e.createElement(D.Z,null,E({id:"global.reset-password",defaultMessage:"Reset password"}))),e.createElement(x.Td,{...a.UW},e.createElement(G.h,{onClick:()=>p("reset_password"),label:E({id:(0,n.OB)("Email.template.form.edit.label"),defaultMessage:"Edit a template"}),noBorder:!0,icon:i&&e.createElement(K.Z,null)}))),e.createElement(F.Tr,{...(0,a.X7)({fn:()=>p("email_confirmation")})},e.createElement(x.Td,null,e.createElement(z.J,null,e.createElement(te.Z,{"aria-label":E({id:(0,n.OB)("Email.template.email_confirmation"),defaultMessage:"Email address confirmation"})}))),e.createElement(x.Td,null,e.createElement(D.Z,null,E({id:(0,n.OB)("Email.template.email_confirmation"),defaultMessage:"Email address confirmation"}))),e.createElement(x.Td,{...a.UW},e.createElement(G.h,{onClick:()=>p("email_confirmation"),label:E({id:(0,n.OB)("Email.template.form.edit.label"),defaultMessage:"Edit a template"}),noBorder:!0,icon:i&&e.createElement(K.Z,null)})))))};J.propTypes={canUpdate:u().bool.isRequired,onEditClick:u().func.isRequired};const ae=J,ne=async()=>{const{get:i}=(0,a.tg)(),{data:p}=await i((0,n.Gc)("email-templates"));return p},le=i=>{const{put:p}=(0,a.tg)();return p((0,n.Gc)("email-templates"),i)},se=()=>e.createElement(a.O4,{permissions:g._.readEmailTemplates},e.createElement(oe,null)),oe=()=>{const{formatMessage:i}=(0,m.Z)(),{trackUsage:p}=(0,a.rS)(),{notifyStatus:E}=(0,r.G)(),h=(0,a.lm)(),{lockApp:B,unlockApp:R}=(0,a.o1)(),C=(0,e.useRef)(p),$=(0,v.useQueryClient)();(0,a.go)();const[re,me]=(0,e.useState)(!1),[Q,de]=(0,e.useState)(null),ce=(0,e.useMemo)(()=>({update:g._.updateEmailTemplates}),[]),{isLoading:ue,allowedActions:{canUpdate:pe}}=(0,a.ss)(ce),{status:Ee,data:X}=(0,v.useQuery)("email-templates",()=>ne(),{onSuccess(){E(i({id:(0,n.OB)("Email.template.data.loaded"),defaultMessage:"Email templates has been loaded"}))},onError(){h({type:"warning",message:{id:"notification.error",defaultMessage:"An error occured"}})}}),ge=ue||Ee!=="success",H=()=>{me(L=>!L)},fe=L=>{de(L),H()},V=(0,v.useMutation)(L=>le({"email-templates":L}),{async onSuccess(){await $.invalidateQueries("email-templates"),h({type:"success",message:{id:"notification.success.saved",defaultMessage:"Saved"}}),C.current("didEditEmailTemplates"),R(),H()},onError(){h({type:"warning",message:{id:"notification.error",defaultMessage:"An error occured"}}),R()},refetchActive:!0}),{isLoading:he}=V,ve=L=>{B(),C.current("willEditEmailTemplates");const ye={...X,[Q]:L};V.mutate(ye)};return ge?e.createElement(M.o,{"aria-busy":"true"},e.createElement(a.SL,{name:i({id:(0,n.OB)("HeaderNav.link.emailTemplates"),defaultMessage:"Email templates"})}),e.createElement(T.T,{title:i({id:(0,n.OB)("HeaderNav.link.emailTemplates"),defaultMessage:"Email templates"})}),e.createElement(j.D,null,e.createElement(a.dO,null))):e.createElement(M.o,{"aria-busy":he},e.createElement(a.SL,{name:i({id:(0,n.OB)("HeaderNav.link.emailTemplates"),defaultMessage:"Email templates"})}),e.createElement(T.T,{title:i({id:(0,n.OB)("HeaderNav.link.emailTemplates"),defaultMessage:"Email templates"})}),e.createElement(j.D,null,e.createElement(ae,{onEditClick:fe,canUpdate:pe}),re&&e.createElement(w,{template:X[Q],onToggle:H,onSubmit:ve})))},ie=se},89031:(U,y,t)=>{t.d(y,{YX:()=>T,Gc:()=>m,OB:()=>v.Z});var e=t(41609),r=t.n(e);const T=g=>Object.keys(g).reduce((n,b)=>{const O=g[b].controllers,l=Object.keys(O).reduce((o,s)=>(r()(O[s])||(o[s]=O[s]),o),{});return r()(l)||(n[b]={controllers:l}),n},{});var j=t(31498);const m=g=>`/${j.Z}/${g}`;var v=t(84757)},49066:(U,y,t)=>{t.d(y,{D:()=>M});var e=t(85893),r=t(41580);const M=({children:T})=>(0,e.jsx)(r.x,{paddingLeft:10,paddingRight:10,children:T})},53979:(U,y,t)=>{t.d(y,{T:()=>n});var e=t(85893),r=t(67294),M=t(71997);const T=l=>{const o=(0,r.useRef)(null),[s,d]=(0,r.useState)(!0),c=([f])=>{d(f.isIntersecting)};return(0,r.useEffect)(()=>{const f=o.current,Z=new IntersectionObserver(c,l);return f&&Z.observe(o.current),()=>{f&&Z.disconnect()}},[o,l]),[o,s]};var j=t(79698);const a=(l,o)=>{const s=(0,j.W)(o);(0,r.useLayoutEffect)(()=>{const d=new ResizeObserver(s);return Array.isArray(l)?l.forEach(c=>{c.current&&d.observe(c.current)}):l.current&&d.observe(l.current),()=>{d.disconnect()}},[l,s])};var m=t(41580),v=t(11047),g=t(75515);const n=l=>{const o=(0,r.useRef)(null),[s,d]=(0,r.useState)(null),[c,f]=T({root:null,rootMargin:"0px",threshold:0});return a(c,()=>{c.current&&d(c.current.getBoundingClientRect())}),(0,r.useEffect)(()=>{o.current&&d(o.current.getBoundingClientRect())},[o]),(0,e.jsxs)(e.Fragment,{children:[(0,e.jsx)("div",{style:{height:s?.height},ref:c,children:f&&(0,e.jsx)(O,{ref:o,...l})}),!f&&(0,e.jsx)(O,{...l,sticky:!0,width:s?.width})]})};n.displayName="HeaderLayout";const b=(0,M.ZP)(m.x)`
  width: ${({width:l})=>l?`${l/16}rem`:void 0};
  z-index: ${({theme:l})=>l.zIndices[1]};
`,O=r.forwardRef(({navigationAction:l,primaryAction:o,secondaryAction:s,subtitle:d,title:c,sticky:f,width:Z,...I},A)=>{const S=typeof d=="string";return f?(0,e.jsx)(b,{paddingLeft:6,paddingRight:6,paddingTop:3,paddingBottom:3,position:"fixed",top:0,right:0,background:"neutral0",shadow:"tableShadow",width:Z,"data-strapi-header-sticky":!0,children:(0,e.jsxs)(v.k,{justifyContent:"space-between",children:[(0,e.jsxs)(v.k,{children:[l&&(0,e.jsx)(m.x,{paddingRight:3,children:l}),(0,e.jsxs)(m.x,{children:[(0,e.jsx)(g.Z,{variant:"beta",as:"h1",...I,children:c}),S?(0,e.jsx)(g.Z,{variant:"pi",textColor:"neutral600",children:d}):d]}),s?(0,e.jsx)(m.x,{paddingLeft:4,children:s}):null]}),(0,e.jsx)(v.k,{children:o?(0,e.jsx)(m.x,{paddingLeft:2,children:o}):void 0})]})}):(0,e.jsxs)(m.x,{ref:A,paddingLeft:10,paddingRight:10,paddingBottom:8,paddingTop:l?6:8,background:"neutral100","data-strapi-header":!0,children:[l?(0,e.jsx)(m.x,{paddingBottom:2,children:l}):null,(0,e.jsxs)(v.k,{justifyContent:"space-between",children:[(0,e.jsxs)(v.k,{minWidth:0,children:[(0,e.jsx)(g.Z,{as:"h1",variant:"alpha",...I,children:c}),s?(0,e.jsx)(m.x,{paddingLeft:4,children:s}):null]}),o]}),S?(0,e.jsx)(g.Z,{variant:"epsilon",textColor:"neutral600",as:"p",children:d}):d]})})},185:(U,y,t)=>{t.d(y,{o:()=>j});var e=t(85893),r=t(71997),M=t(41580);const T=(0,r.ZP)(M.x)`
  // To prevent global outline on focus visible to force an outline when Main is focused
  &:focus-visible {
    outline: none;
  }
`,j=({labelledBy:a="main-content-title",...m})=>(0,e.jsx)(T,{"aria-labelledby":a,as:"main",id:"main-content",tabIndex:-1,...m})}}]);
